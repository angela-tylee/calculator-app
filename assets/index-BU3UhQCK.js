(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();localStorage.getItem("theme");const m=document.querySelectorAll("#theme");m.forEach(t=>{t.addEventListener("click",e=>{console.log(e.target.value),e.target.value==="1"?(document.documentElement.setAttribute("data-theme","one"),localStorage.setItem("theme","1")):e.target.value==="2"?(document.documentElement.setAttribute("data-theme","two"),localStorage.setItem("theme","2")):e.target.value==="3"&&(document.documentElement.setAttribute("data-theme","three"),localStorage.setItem("theme","3"))})});const c=document.querySelector("#calculator-display"),f=document.querySelectorAll(".btn");f.forEach(t=>{t.addEventListener("click",e=>{d(e.target.dataset.key)})});function d(t){c.textContent+=t,u()}function p(){c.textContent+=".",u()}function g(t){c.textContent+=x(t)}function u(){let t=c.textContent;console.log("Before formatting:",t);const e=t.split(/([+\-*/×÷])/);for(let n=0;n<e.length;n++)!h(e[n])&&!y(e[n])&&(e[n]=C(e[n]));c.textContent=e.join(""),console.log("After formatting:",c.textContent)}function h(t){return["+","-","*","/"].includes(t)}function y(t){return["+","-","×","÷"].includes(t)}function x(t){switch(t){case"*":return"×";case"/":return"÷";default:return t}}function C(t){if(!t||t.trim()==="")return t;if(t===".")return"0.";let e=t.split("."),n=e[0],s=e.length>1?e[1]:"";return n===""||n==="0"?n="0":(n=n.replace(/[^\d]/g,""),n!==""&&(n=n.replace(/\B(?=(\d{3})+(?!\d))/g,","))),s&&(s=s.replace(/[^\d]/g,""),s!==""&&(s=s.replace(/\B(?=(\d{3})+(?!\d))/g,","))),e.length>1?n+"."+s:n}function E(){let t=c.textContent.split("");t.pop(),c.textContent=t.join(""),u()}function b(){c.textContent=""}function v(){const t=c.textContent.replace(/,/g,""),e=L(t);c.textContent=e,u()}function L(t){console.log(t);const e=t.match(/(\d+(\.\d+)?|[+\-*/×÷])/g);if(console.log(e),!e)return;const n=[];let s=parseFloat(e[0]);for(let o=1;o<e.length;o+=2){const l=e[o],i=parseFloat(e[o+1]);l==="×"||l==="*"?s*=i:l==="÷"||l==="*"?s/=i:(n.push(s),n.push(l),s=i)}n.push(s);let r=n[0];for(let o=1;o<n.length;o+=2){const l=n[o],i=n[o+1];l==="+"?r+=i:l==="-"&&(r-=i)}return r}function a(t,e){f.forEach(n=>{n.dataset.key===t&&(console.log(n.dataset.key),n.classList.add("btn-pressed"),e(t),setTimeout(()=>n.classList.remove("btn-pressed"),200))})}document.addEventListener("keydown",t=>{const e=t.key;isNaN(e)?e==="."?a(e,p):e==="+"||e==="-"||e==="*"||e==="/"?a(e,g):e==="Backspace"?a(e,E):e==="Enter"?a(e,v):e==="Escape"&&a(e,b):a(e,d)});
